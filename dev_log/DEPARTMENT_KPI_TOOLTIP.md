# 部门绩效KPI问号功能添加总结

## 功能描述
在KPI分析页面的"部门绩效对比"图表中添加了问号功能，鼠标悬停可查看各部门绩效的详细计算公式。

## 实现功能

### 1. 标题问号提示
- 在"部门绩效对比"标题旁添加问号图标
- 鼠标悬停显示生产部绩效计算公式（作为示例）

### 2. 图表交互增强
- 增强了图表的Tooltip功能
- 鼠标悬停在柱状图上显示详细信息：
  - 部门名称和绩效计算标题
  - 当前绩效得分和目标分数
  - 该部门的计算公式
  - 前两个关键指标的详细说明

### 3. 部门绩效计算公式

#### 生产部绩效
- **公式**: 生产部绩效 = (产量达成率 × 0.4) + (生产效率 × 0.3) + (OEE × 0.3)
- **关键指标**:
  - 产量达成率 = 实际产量 / 计划产量 × 100%
  - 生产效率 = 标准工时 / 实际工时 × 100%
  - OEE = 可用率 × 性能率 × 质量率

#### 质量部绩效
- **公式**: 质量部绩效 = (合格率 × 0.5) + (客户投诉处理率 × 0.3) + (检验及时率 × 0.2)
- **关键指标**:
  - 合格率 = 合格品数量 / 总检验数量 × 100%
  - 客户投诉处理率 = 及时处理投诉数 / 总投诉数 × 100%

#### 设备部绩效
- **公式**: 设备部绩效 = (设备利用率 × 0.4) + (故障响应时间 × 0.3) + (预防维护完成率 × 0.3)
- **关键指标**:
  - 设备利用率 = 设备运行时间 / 计划运行时间 × 100%
  - 故障响应时间得分 = (标准响应时间 / 实际响应时间) × 100%

#### 物流部绩效
- **公式**: 物流部绩效 = (交付及时率 × 0.4) + (库存准确率 × 0.3) + (成本控制率 × 0.3)
- **关键指标**:
  - 交付及时率 = 按时交付订单数 / 总订单数 × 100%
  - 库存准确率 = 盘点准确数量 / 盘点总数量 × 100%

## 技术实现

### 组件结构
- `DepartmentKPITooltip`: 部门KPI提示组件
- `departmentKPIFormulas`: 部门绩效公式配置对象
- 增强的RechartsTooltip自定义内容

### 用户体验
- **标题提示**: 鼠标悬停标题问号显示通用说明
- **图表交互**: 鼠标悬停柱状图显示具体部门公式
- **分层信息**: 从概览到详细的渐进式信息展示
- **视觉设计**: 统一的提示框样式和颜色编码

## MES最佳实践
- 符合制造执行系统的绩效管理标准
- 基于平衡计分卡理念的多维度评估
- 权重分配体现各部门核心职责
- 量化指标便于持续改进

## 状态
✅ 功能完成，支持四个部门的绩效公式展示
✅ 交互体验优化，信息层次清晰
✅ 符合MES系统绩效管理最佳实践