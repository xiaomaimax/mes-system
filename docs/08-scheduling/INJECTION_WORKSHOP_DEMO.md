# 注塑车间排程演示指南

## 📋 概述

本文档提供了一份完整的注塑车间排程演示场景，包含10个计划单、5个注塑设备、6个模具和6种产品，涵盖了排程系统的各种业务逻辑和冲突场景。

## 🚀 快速开始

### 1. 初始化演示数据

```bash
# 确保后端服务已启动
npm run dev

# 在新的终端中运行初始化脚本
node scripts/init-scheduling-data.js
```

### 2. 启动前端应用

```bash
cd client
npm start
```

### 3. 访问排程模块

1. 登录系统
2. 在左侧菜单中点击"辅助排程"
3. 查看各个标签栏的数据

## 📊 演示数据详情

### 物料清单 (6种产品)

| 物料编号 | 产品名称 | 规格 | 说明 |
|---------|---------|------|------|
| MAT-INJ-001 | 手机壳-黑色 | 100x50x10mm | 常规产品 |
| MAT-INJ-002 | 手机壳-白色 | 100x50x10mm | 常规产品 |
| MAT-INJ-003 | 手机壳-蓝色 | 100x50x10mm | 特殊产品 |
| MAT-INJ-004 | 充电器外壳 | 80x40x20mm | 常规产品 |
| MAT-INJ-005 | 电池盖板 | 60x30x5mm | 小件产品 |
| MAT-INJ-006 | 屏幕支架 | 120x80x15mm | 特殊产品 |

### 设备清单 (5台注塑机)

| 设备编号 | 设备名称 | 规格 | 产能 | 状态 | 说明 |
|---------|---------|------|------|------|------|
| INJ-001 | 注塑机1号 | 100T | 120个/小时 | 正常 | 主力设备 |
| INJ-002 | 注塑机2号 | 150T | 150个/小时 | 正常 | 高产能设备 |
| INJ-003 | 注塑机3号 | 80T | 100个/小时 | 正常 | 小件设备 |
| INJ-004 | 注塑机4号 | 120T | 130个/小时 | 维修中 | ⚠️ 不可用 |
| INJ-005 | 注塑机5号 | 100T | 120个/小时 | 正常 | 备用设备 |

### 模具清单 (7副模具)

| 模具编号 | 模具名称 | 规格 | 数量 | 状态 | 说明 |
|---------|---------|------|------|------|------|
| MOLD-INJ-001 | 手机壳模具-黑色 | 手机壳专用 | 2副 | 正常 | 可并行使用 |
| MOLD-INJ-002 | 手机壳模具-白色 | 手机壳专用 | 2副 | 正常 | 可并行使用 |
| MOLD-INJ-003 | 手机壳模具-蓝色 | 手机壳专用 | 1副 | 正常 | ⚠️ 单副模具 |
| MOLD-INJ-004 | 充电器外壳模具 | 充电器专用 | 2副 | 正常 | 可并行使用 |
| MOLD-INJ-005 | 电池盖板模具 | 电池盖板专用 | 3副 | 正常 | 充足 |
| MOLD-INJ-006 | 屏幕支架模具 | 屏幕支架专用 | 1副 | 维修中 | ⚠️ 不可用 |
| MOLD-INJ-007 | 通用模具 | 手机壳+充电器 | 2副 | 正常 | 灵活分配 |

## 📋 计划单详情 (10个订单)

### 场景1: 紧急订单 - 手机壳黑色

```
计划单号: PLAN-2024-001
产品: 手机壳-黑色 (MAT-INJ-001)
数量: 5000件
交期: 2天后
优先级: 最高 (交期最近)
```

**排程建议:**
- 应分配到权重最高的设备 (INJ-001 权重90)
- 使用专用模具 MOLD-INJ-001
- 预计生产时间: 5000 ÷ 120 = 42小时 (超过2天)
- ⚠️ 可能超期，需要多设备并行

### 场景2: 大订单 - 手机壳白色

```
计划单号: PLAN-2024-002
产品: 手机壳-白色 (MAT-INJ-002)
数量: 8000件
交期: 3天后
优先级: 高
```

**排程建议:**
- 应分配到权重最高的设备 (INJ-002 权重95)
- 使用专用模具 MOLD-INJ-002
- 预计生产时间: 8000 ÷ 150 = 53小时 (接近3天)
- 需要充分利用设备产能

### 场景3: 中等订单 - 手机壳蓝色

```
计划单号: PLAN-2024-003
产品: 手机壳-蓝色 (MAT-INJ-003)
数量: 3000件
交期: 5天后
优先级: 中
```

**排程建议:**
- 应分配到权重最高的设备 (INJ-003 权重90)
- 使用单副模具 MOLD-INJ-003 (绑定关系)
- 预计生产时间: 3000 ÷ 100 = 30小时
- 交期充足，排程灵活

### 场景4: 常规订单 - 充电器外壳

```
计划单号: PLAN-2024-004
产品: 充电器外壳 (MAT-INJ-004)
数量: 4000件
交期: 4天后
优先级: 中
```

**排程建议:**
- 应分配到权重最高的设备 (INJ-002 权重90)
- 使用专用模具 MOLD-INJ-004
- 预计生产时间: 4000 ÷ 150 = 27小时
- 可与其他订单共享设备

### 场景5: 小订单 - 电池盖板

```
计划单号: PLAN-2024-005
产品: 电池盖板 (MAT-INJ-005)
数量: 2000件
交期: 3天后
优先级: 中
```

**排程建议:**
- 应分配到权重最高的设备 (INJ-003 权重85)
- 使用专用模具 MOLD-INJ-005
- 预计生产时间: 2000 ÷ 100 = 20小时
- 可与其他小件订单共享

### 场景6: 特殊订单 - 屏幕支架

```
计划单号: PLAN-2024-006
产品: 屏幕支架 (MAT-INJ-006)
数量: 1500件
交期: 6天后
优先级: 低
```

**排程建议:**
- ⚠️ 专用模具 MOLD-INJ-006 在维修中，无法使用
- 需要等待模具维修完成或寻找替代方案
- 预计生产时间: 1500 ÷ 150 = 10小时
- 交期充足，可延后排产

### 场景7: 追加订单 - 手机壳黑色

```
计划单号: PLAN-2024-007
产品: 手机壳-黑色 (MAT-INJ-001)
数量: 3000件
交期: 4天后
优先级: 中
```

**排程建议:**
- 与 PLAN-2024-001 同物料
- 应分配到同一设备和模具 (同物料一致性)
- 可与 PLAN-001 共享设备和模具
- 预计生产时间: 3000 ÷ 120 = 25小时

### 场景8: 追加订单 - 手机壳白色

```
计划单号: PLAN-2024-008
产品: 手机壳-白色 (MAT-INJ-002)
数量: 2000件
交期: 5天后
优先级: 中
```

**排程建议:**
- 与 PLAN-2024-002 同物料
- 应分配到同一设备和模具 (同物料一致性)
- 可与 PLAN-002 共享设备和模具
- 预计生产时间: 2000 ÷ 150 = 13小时

### 场景9: 追加订单 - 充电器外壳

```
计划单号: PLAN-2024-009
产品: 充电器外壳 (MAT-INJ-004)
数量: 3000件
交期: 3天后
优先级: 高
```

**排程建议:**
- 与 PLAN-2024-004 同物料
- 应分配到同一设备和模具 (同物料一致性)
- 交期紧张 (3天)
- 预计生产时间: 3000 ÷ 150 = 20小时
- 可使用通用模具 MOLD-INJ-007 作为备选

### 场景10: 追加订单 - 电池盖板

```
计划单号: PLAN-2024-010
产品: 电池盖板 (MAT-INJ-005)
数量: 1500件
交期: 4天后
优先级: 中
```

**排程建议:**
- 与 PLAN-2024-005 同物料
- 应分配到同一设备和模具 (同物料一致性)
- 预计生产时间: 1500 ÷ 100 = 15小时
- 交期充足

## 🎯 排程业务逻辑

### 1. 交期优先原则

计划单应按交期从早到晚排序:

```
优先级顺序:
1. PLAN-001 (2天) - 最紧急
2. PLAN-005 (3天)
3. PLAN-002 (3天)
4. PLAN-009 (3天)
5. PLAN-004 (4天)
6. PLAN-007 (4天)
7. PLAN-010 (4天)
8. PLAN-003 (5天)
9. PLAN-008 (5天)
10. PLAN-006 (6天) - 最宽松
```

### 2. 权重优先原则

同一物料的不同设备权重:

```
手机壳黑色 (MAT-INJ-001):
- INJ-001: 权重90 ✓ 首选
- INJ-002: 权重85
- INJ-003: 权重70

手机壳白色 (MAT-INJ-002):
- INJ-002: 权重95 ✓ 首选
- INJ-001: 权重80
- INJ-005: 权重75
```

### 3. 同物料一致性

相同物料的计划单应分配到同一设备和模具:

```
手机壳黑色:
- PLAN-001 → INJ-001 + MOLD-001
- PLAN-007 → INJ-001 + MOLD-001 (同一设备和模具)

手机壳白色:
- PLAN-002 → INJ-002 + MOLD-002
- PLAN-008 → INJ-002 + MOLD-002 (同一设备和模具)

充电器外壳:
- PLAN-004 → INJ-002 + MOLD-004
- PLAN-009 → INJ-002 + MOLD-004 (同一设备和模具)
```

### 4. 模具-设备独占性

同一模具同一时间只能分配到一台设备:

```
MOLD-001 (手机壳黑色):
- 时间段1: INJ-001 (PLAN-001)
- 时间段2: INJ-001 (PLAN-007)
- ✓ 不能同时分配到 INJ-002

MOLD-002 (手机壳白色):
- 时间段1: INJ-002 (PLAN-002)
- 时间段2: INJ-002 (PLAN-008)
- ✓ 不能同时分配到 INJ-001
```

### 5. 单副模具绑定

单副模具必须绑定到同一设备:

```
MOLD-003 (手机壳蓝色) - 1副:
- 已分配到 INJ-003
- ✓ 后续所有使用该模具的计划单必须分配到 INJ-003
- ✗ 不能分配到其他设备

MOLD-006 (屏幕支架) - 1副:
- 在维修中，无法使用
- ⚠️ PLAN-006 无法按时完成
```

### 6. 多模具灵活分配

多副模具可灵活分配到不同设备:

```
MOLD-001 (手机壳黑色) - 2副:
- 副1: INJ-001
- 副2: INJ-002 (如果需要)
- ✓ 可并行使用

MOLD-004 (充电器外壳) - 2副:
- 副1: INJ-002
- 副2: INJ-001 (如果需要)
- ✓ 可并行使用
```

### 7. 通用模具灵活分配

通用模具可用于多种产品:

```
MOLD-007 (通用模具) - 2副:
- 可生产: 手机壳黑色、手机壳白色、充电器外壳
- 用途: 当专用模具不足时的备选方案
- 权重: 较低 (70-75)，优先使用专用模具
```

## 🔄 排程冲突场景

### 冲突1: 设备产能不足

**问题:** PLAN-001 (5000件) 在2天内无法完成

```
计算:
- 需要时间: 5000 ÷ 120 = 42小时
- 可用时间: 2天 × 24小时 = 48小时
- 结论: 勉强可以完成，但需要充分利用设备

解决方案:
- 分配到产能最高的设备 INJ-002 (150个/小时)
- 需要时间: 5000 ÷ 150 = 33小时 ✓ 可以完成
```

### 冲突2: 模具维修

**问题:** PLAN-006 (屏幕支架) 的专用模具在维修中

```
现状:
- MOLD-006 状态: 维修中
- 无法使用该模具

解决方案:
- 等待模具维修完成
- 或延后排产时间
- 或寻找替代模具 (无)
- 结论: 无法按时完成，需要与客户沟通
```

### 冲突3: 设备维修

**问题:** INJ-004 在维修中，无法使用

```
影响:
- 可用设备: INJ-001, INJ-002, INJ-003, INJ-005
- 产能下降: 130个/小时

解决方案:
- 充分利用其他设备
- 优先分配到高产能设备 (INJ-002)
- 灵活使用备用设备 (INJ-005)
```

### 冲突4: 单副模具绑定

**问题:** MOLD-003 (手机壳蓝色) 只有1副，已分配到 INJ-003

```
约束:
- PLAN-003 → INJ-003 + MOLD-003
- 后续所有使用 MOLD-003 的计划单必须分配到 INJ-003
- 不能分配到其他设备

影响:
- INJ-003 的产能可能成为瓶颈
- 需要合理安排生产时间
```

### 冲突5: 同物料一致性

**问题:** PLAN-001 和 PLAN-007 都是手机壳黑色

```
要求:
- 应分配到同一设备和模具
- PLAN-001 → INJ-001 + MOLD-001
- PLAN-007 → INJ-001 + MOLD-001

优势:
- 减少换模次数
- 提高生产效率
- 保证产品一致性
```

## 📊 排程结果示例

### 推荐排程方案

```
设备 INJ-001 (产能120个/小时):
├─ 时间段1 (0-42小时): PLAN-001 (手机壳黑色 5000件)
└─ 时间段2 (42-67小时): PLAN-007 (手机壳黑色 3000件)

设备 INJ-002 (产能150个/小时):
├─ 时间段1 (0-53小时): PLAN-002 (手机壳白色 8000件)
├─ 时间段2 (53-73小时): PLAN-004 (充电器外壳 4000件)
└─ 时间段3 (73-93小时): PLAN-009 (充电器外壳 3000件)

设备 INJ-003 (产能100个/小时):
├─ 时间段1 (0-30小时): PLAN-003 (手机壳蓝色 3000件)
└─ 时间段2 (30-45小时): PLAN-005 (电池盖板 2000件)

设备 INJ-005 (产能120个/小时):
├─ 时间段1 (0-13小时): PLAN-008 (手机壳白色 2000件)
└─ 时间段2 (13-28小时): PLAN-010 (电池盖板 1500件)

设备 INJ-004: 维修中，不可用

特殊情况:
- PLAN-006 (屏幕支架): 模具维修中，无法排产
```

## 🎓 学习要点

### 1. 理解交期优先原则

- 计划单应按交期排序
- 优先满足交期要求
- 在满足交期的前提下考虑其他因素

### 2. 理解权重优先原则

- 权重高的设备优先选择
- 权重高的模具优先选择
- 权重综合排序

### 3. 理解资源约束

- 模具-设备独占性
- 单副模具绑定规则
- 计划单唯一性

### 4. 理解生产一致性

- 同物料应分配到同一设备和模具
- 减少换模次数
- 提高生产效率

### 5. 理解灵活分配

- 多副模具可并行使用
- 通用模具可灵活分配
- 多模具物料可灵活选择

## 🚀 操作步骤

### 第1步: 查看物料管理

1. 进入"辅助排程"模块
2. 点击"物料管理"标签
3. 查看6种产品的信息
4. 了解产品规格和类型

### 第2步: 查看设备管理

1. 点击"设备管理"标签
2. 查看5台注塑机的信息
3. 注意 INJ-004 的维修状态
4. 了解各设备的产能

### 第3步: 查看模具管理

1. 点击"模具管理"标签
2. 查看7副模具的信息
3. 注意 MOLD-003 和 MOLD-006 的特殊性
4. 了解模具的数量和状态

### 第4步: 查看计划单管理

1. 点击"计划单管理"标签
2. 查看10个计划单的信息
3. 注意交期的紧张程度
4. 了解各计划单的数量

### 第5步: 执行自动排产

1. 回到"概览"标签
2. 点击"执行自动排产"按钮
3. 确认执行排产
4. 等待排产完成

### 第6步: 查看排程结果

1. 点击"任务单管理"标签
2. 查看生成的任务单
3. 检查设备和模具的分配
4. 查看是否有超期任务单

### 第7步: 查看排程结果展示

1. 点击"排程结果"标签
2. 查看按设备分组的结果
3. 查看时间轴视图
4. 分析排程的合理性

## 💡 思考题

1. **为什么 PLAN-001 应该分配到 INJ-002 而不是 INJ-001?**
   - 答: 虽然 INJ-001 的权重更高 (90 vs 85)，但 INJ-002 的产能更高 (150 vs 120)，能更好地满足2天的交期要求。

2. **PLAN-001 和 PLAN-007 为什么应该分配到同一设备和模具?**
   - 答: 它们都是手机壳黑色，同物料应分配到同一设备和模具，以保证产品一致性和减少换模次数。

3. **PLAN-006 为什么无法按时完成?**
   - 答: 其专用模具 MOLD-006 在维修中，无法使用。需要等待模具维修完成或寻找替代方案。

4. **如何处理 PLAN-009 的紧张交期?**
   - 答: 可以分配到高产能设备 INJ-002，或使用通用模具 MOLD-007 作为备选方案。

5. **为什么 MOLD-003 的绑定关系很重要?**
   - 答: MOLD-003 只有1副，一旦分配到某个设备，后续所有使用该模具的计划单都必须分配到同一设备，这会影响排程的灵活性。

## 📝 总结

通过这个注塑车间的演示场景，你可以：

✅ 理解排程系统的核心业务逻辑  
✅ 学习如何处理资源约束和冲突  
✅ 掌握权重优先和交期优先的平衡  
✅ 理解同物料一致性的重要性  
✅ 学习灵活分配多模具资源  
✅ 实践排程系统的各项功能  

---

**演示场景版本**: 1.0  
**最后更新**: 2024-12-25  
**适用系统**: MES 辅助排程模块 v1.0+
