# 注塑车间排程演示 - 快速启动指南

## ⚡ 5分钟快速开始

### 第1步: 启动后端服务 (1分钟)

```bash
# 确保在项目根目录
npm run dev
```

等待输出:
```
MES系统服务器运行在端口 5000
```

### 第2步: 初始化演示数据 (2分钟)

```bash
# 在新的终端中运行
node scripts/init-scheduling-data.js
```

等待输出:
```
✅ 注塑车间排程数据初始化完成！
```

### 第3步: 启动前端应用 (1分钟)

```bash
cd client
npm start
```

等待浏览器自动打开 `http://localhost:3000`

### 第4步: 登录系统 (1分钟)

- 用户名: `admin`
- 密码: `123456`

## 🎯 演示流程

### 步骤1: 查看物料管理 (1分钟)

1. 点击左侧菜单"辅助排程"
2. 点击"物料管理"标签
3. 查看6种产品:
   - 手机壳-黑色 (5000件)
   - 手机壳-白色 (8000件)
   - 手机壳-蓝色 (3000件)
   - 充电器外壳 (4000件)
   - 电池盖板 (2000件)
   - 屏幕支架 (1500件)

### 步骤2: 查看设备管理 (1分钟)

1. 点击"设备管理"标签
2. 查看5台注塑机:
   - INJ-001: 100T, 产能120个/小时 ✓ 正常
   - INJ-002: 150T, 产能150个/小时 ✓ 正常
   - INJ-003: 80T, 产能100个/小时 ✓ 正常
   - INJ-004: 120T, 产能130个/小时 ⚠️ 维修中
   - INJ-005: 100T, 产能120个/小时 ✓ 正常

### 步骤3: 查看模具管理 (1分钟)

1. 点击"模具管理"标签
2. 查看7副模具:
   - MOLD-001: 手机壳黑色 (2副) ✓ 正常
   - MOLD-002: 手机壳白色 (2副) ✓ 正常
   - MOLD-003: 手机壳蓝色 (1副) ✓ 正常 ⚠️ 单副
   - MOLD-004: 充电器外壳 (2副) ✓ 正常
   - MOLD-005: 电池盖板 (3副) ✓ 正常
   - MOLD-006: 屏幕支架 (1副) ⚠️ 维修中
   - MOLD-007: 通用模具 (2副) ✓ 正常

### 步骤4: 查看计划单管理 (2分钟)

1. 点击"计划单管理"标签
2. 查看10个计划单:

| 计划单号 | 产品 | 数量 | 交期 | 优先级 |
|---------|------|------|------|--------|
| PLAN-001 | 手机壳黑色 | 5000 | 2天 | 🔴 最高 |
| PLAN-002 | 手机壳白色 | 8000 | 3天 | 🟠 高 |
| PLAN-003 | 手机壳蓝色 | 3000 | 5天 | 🟡 中 |
| PLAN-004 | 充电器外壳 | 4000 | 4天 | 🟡 中 |
| PLAN-005 | 电池盖板 | 2000 | 3天 | 🟡 中 |
| PLAN-006 | 屏幕支架 | 1500 | 6天 | 🟢 低 |
| PLAN-007 | 手机壳黑色 | 3000 | 4天 | 🟡 中 |
| PLAN-008 | 手机壳白色 | 2000 | 5天 | 🟡 中 |
| PLAN-009 | 充电器外壳 | 3000 | 3天 | 🟠 高 |
| PLAN-010 | 电池盖板 | 1500 | 4天 | 🟡 中 |

### 步骤5: 执行自动排产 (1分钟)

1. 点击"概览"标签
2. 点击"执行自动排产"按钮
3. 在弹出框中点击"确定"
4. 等待排产完成

**预期结果:**
- 生成10个任务单
- 分配到5台设备
- 部分任务单可能超期

### 步骤6: 查看任务单管理 (2分钟)

1. 点击"任务单管理"标签
2. 查看生成的任务单:
   - 任务单号: TASK-xxxxx
   - 计划单号: PLAN-2024-001 等
   - 设备分配: INJ-001, INJ-002 等
   - 模具分配: MOLD-001, MOLD-002 等
   - 超期标识: 是/否

**关键观察:**
- ✓ 同物料计划单分配到同一设备和模具
- ✓ 权重高的设备优先分配
- ⚠️ 某些任务单可能超期
- ⚠️ PLAN-006 可能无法排产 (模具维修中)

### 步骤7: 查看排程结果 (2分钟)

1. 点击"排程结果"标签
2. 查看统计信息:
   - 总任务单数: 10
   - 超期任务单: X个
   - 已完成: 0个

3. 查看按设备分组的结果:
   - INJ-001: 2个任务单
   - INJ-002: 3个任务单
   - INJ-003: 2个任务单
   - INJ-005: 2个任务单
   - INJ-004: 0个 (维修中)

4. 查看时间轴视图:
   - 显示各任务单的时间分布
   - 显示超期任务单 (红色)
   - 显示正常任务单 (绿色)

## 🔍 关键业务逻辑验证

### 验证1: 交期优先

✓ 检查 PLAN-001 (2天交期) 是否优先排产  
✓ 检查 PLAN-006 (6天交期) 是否最后排产

### 验证2: 权重优先

✓ 检查 PLAN-001 是否分配到权重最高的设备  
✓ 检查 PLAN-002 是否分配到权重最高的设备

### 验证3: 同物料一致性

✓ 检查 PLAN-001 和 PLAN-007 是否分配到同一设备和模具  
✓ 检查 PLAN-002 和 PLAN-008 是否分配到同一设备和模具  
✓ 检查 PLAN-004 和 PLAN-009 是否分配到同一设备和模具

### 验证4: 模具-设备独占性

✓ 检查同一模具是否分配到多个设备  
✓ 检查模具的时间段是否有重叠

### 验证5: 单副模具绑定

✓ 检查 MOLD-003 是否绑定到同一设备  
✓ 检查后续使用 MOLD-003 的计划单是否分配到同一设备

### 验证6: 资源冲突处理

✓ 检查 INJ-004 (维修中) 是否被排除  
✓ 检查 MOLD-006 (维修中) 是否被排除  
✓ 检查 PLAN-006 是否无法排产

## 📊 预期排程结果

### 设备分配

```
INJ-001 (产能120个/小时):
├─ PLAN-001 (手机壳黑色 5000件) - 42小时
└─ PLAN-007 (手机壳黑色 3000件) - 25小时

INJ-002 (产能150个/小时):
├─ PLAN-002 (手机壳白色 8000件) - 53小时
├─ PLAN-004 (充电器外壳 4000件) - 27小时
└─ PLAN-009 (充电器外壳 3000件) - 20小时

INJ-003 (产能100个/小时):
├─ PLAN-003 (手机壳蓝色 3000件) - 30小时
└─ PLAN-005 (电池盖板 2000件) - 20小时

INJ-005 (产能120个/小时):
├─ PLAN-008 (手机壳白色 2000件) - 17小时
└─ PLAN-010 (电池盖板 1500件) - 13小时

INJ-004: 维修中，不可用

特殊情况:
PLAN-006 (屏幕支架): 模具维修中，无法排产
```

### 超期分析

```
可能超期的任务单:
- PLAN-001: 需要42小时，但只有48小时 (勉强可以)
- PLAN-002: 需要53小时，但只有72小时 (可以)
- PLAN-009: 需要20小时，但只有72小时 (可以)

无法完成的任务单:
- PLAN-006: 模具维修中，无法排产
```

## 🎓 学习要点

### 1. 理解排程系统的核心逻辑

- 交期优先原则
- 权重优先原则
- 资源约束处理
- 冲突解决机制

### 2. 理解注塑车间的生产特点

- 多种产品共享设备
- 模具的重要性
- 产能的限制
- 维修对排程的影响

### 3. 理解排程的复杂性

- 多个约束条件
- 多个优化目标
- 资源的有限性
- 交期的紧张性

### 4. 理解系统的实用价值

- 自动化排程
- 减少人工工作
- 提高生产效率
- 保证交期

## 💡 进阶操作

### 手动调整任务单

1. 点击"任务单管理"标签
2. 找到需要调整的任务单
3. 点击"调整"按钮
4. 修改设备、模具或时间
5. 点击"确定"保存

### 导出任务单

1. 点击"任务单管理"标签
2. 点击"导出Excel"按钮
3. 系统自动生成Excel文件
4. 下载到本地

### 导入ERP任务单

1. 在ERP系统中导出任务单
2. 点击"任务单管理"标签
3. 点击"导入ERP"按钮
4. 上传ERP导出的文件
5. 系统自动关联ERP任务单号

## 🐛 常见问题

### Q1: 为什么 PLAN-006 无法排产?

**A:** 因为其专用模具 MOLD-006 在维修中，无法使用。需要等待模具维修完成。

### Q2: 为什么 PLAN-001 可能超期?

**A:** 因为需要42小时生产，但交期只有2天 (48小时)，时间非常紧张。

### Q3: 为什么 PLAN-001 和 PLAN-007 分配到同一设备?

**A:** 因为它们都是手机壳黑色，同物料应分配到同一设备和模具，以保证产品一致性。

### Q4: 为什么 INJ-004 没有任务单?

**A:** 因为 INJ-004 在维修中，状态为"维修中"，排程系统自动排除了它。

### Q5: 如何处理 PLAN-006 的排产?

**A:** 可以等待 MOLD-006 维修完成后再排产，或者延后交期与客户沟通。

## 📞 获取帮助

- 详细文档: `docs/08-scheduling/INJECTION_WORKSHOP_DEMO.md`
- 技术设计: `docs/08-scheduling/SCHEDULING_DESIGN.md`
- 实现指南: `docs/08-scheduling/IMPLEMENTATION_GUIDE.md`
- 快速参考: `docs/08-scheduling/QUICK_REFERENCE.md`

## ✅ 完成检查清单

- [ ] 后端服务已启动
- [ ] 演示数据已初始化
- [ ] 前端应用已启动
- [ ] 已登录系统
- [ ] 已查看物料管理
- [ ] 已查看设备管理
- [ ] 已查看模具管理
- [ ] 已查看计划单管理
- [ ] 已执行自动排产
- [ ] 已查看任务单管理
- [ ] 已查看排程结果
- [ ] 已验证业务逻辑

---

**演示版本**: 1.0  
**最后更新**: 2024-12-25  
**预计时间**: 15-20分钟
