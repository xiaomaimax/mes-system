# MES 系统新手引导实现指南

## 概述

为了帮助初次接触 MES 系统的业务用户快速上手，我们实现了一个完整的新手引导系统，包括：

1. **交互式新手引导向导** - 首次登录时自动显示
2. **上下文帮助面板** - 每个页面都有帮助按钮
3. **智能提示系统** - 根据用户行为显示相关提示

---

## 功能特性

### 1. 新手引导向导（OnboardingGuide）

#### 工作原理
- 首次登录时自动启动
- 逐步引导用户了解系统的主要功能
- 用户可以跳过或重新开始

#### 引导步骤
1. **欢迎** - 介绍 MES 系统
2. **功能菜单** - 说明左侧菜单的用途
3. **仪表板** - 介绍首页功能
4. **生产管理** - 说明生产管理模块
5. **质量管理** - 说明质量管理模块
6. **库存管理** - 说明库存管理模块
7. **报表分析** - 说明报表功能
8. **获取帮助** - 说明如何获取帮助
9. **开始使用** - 完成引导

#### 用户交互
- **下一步** - 进入下一个引导步骤
- **跳过** - 跳过引导（需要确认）
- **完成** - 完成引导

#### 存储管理
- 引导完成状态存储在 `localStorage` 中
- 用户可以通过"重新开始引导"按钮重新启动

### 2. 上下文帮助面板（HelpPanel）

#### 功能
- 显示当前页面的帮助信息
- 提供常见问题解答（FAQ）
- 提供使用提示

#### 支持的模块
- **仪表板** - 关键指标和实时数据
- **生产管理** - 计划、任务和进度
- **质量管理** - 检验数据和质量监控
- **库存管理** - 物料和库存操作
- **报表分析** - 数据分析和导出

#### 帮助内容结构
```
├── 模块描述 - 简要说明模块的用途
├── 核心功能 - 列出主要功能
├── 常见问题 - 用户常见的问题和答案
└── 使用提示 - 实用的使用建议
```

---

## 使用方法

### 对于用户

#### 首次登录
1. 登录系统后，会自动显示新手引导
2. 按照引导逐步了解系统功能
3. 可以点击"下一步"继续，或"跳过"跳过引导

#### 查看帮助
1. 在任何页面点击右上角的"?"按钮
2. 会打开帮助面板，显示该页面的帮助信息
3. 可以查看常见问题和使用提示

#### 重新开始引导
1. 在首页点击"重新开始引导"按钮
2. 引导会从第一步重新开始

### 对于开发者

#### 添加新的帮助内容

在 `HelpPanel.js` 中的 `helpContent` 对象中添加新的模块：

```javascript
const helpContent = {
  your_module: {
    title: '模块名称帮助',
    description: '模块的简要描述',
    features: [
      '功能1',
      '功能2',
      '功能3'
    ],
    faqs: [
      {
        question: '常见问题1？',
        answer: '答案1'
      },
      {
        question: '常见问题2？',
        answer: '答案2'
      }
    ],
    tips: [
      '💡 提示1',
      '💡 提示2'
    ]
  }
};
```

然后在相应的页面中使用：

```javascript
<HelpPanel moduleKey="your_module" />
```

#### 自定义引导步骤

在 `OnboardingGuide.js` 中的 `defineSteps()` 方法中修改 `this.steps` 数组：

```javascript
defineSteps() {
  this.steps = [
    {
      id: 'step_id',
      title: '步骤标题',
      description: '步骤描述',
      target: 'CSS选择器',  // 要高亮的元素
      position: 'right',     // 提示框位置：center, right, left, bottom
      action: 'next'         // 按钮类型：next 或 complete
    },
    // ... 更多步骤
  ];
}
```

#### 手动启动引导

```javascript
import OnboardingGuide from '../utils/OnboardingGuide';

// 启动引导
const guide = OnboardingGuide.initialize();
guide.start();

// 重新开始引导
guide.restart();

// 完成引导
guide.complete();

// 清理资源
guide.destroy();
```

---

## 技术实现细节

### OnboardingGuide 类

#### 主要方法
- `initialize()` - 初始化引导系统
- `start()` - 开始引导
- `showStep(stepIndex)` - 显示指定步骤
- `next()` - 下一步
- `skip()` - 跳过引导
- `complete()` - 完成引导
- `restart()` - 重新开始
- `destroy()` - 清理资源

#### 核心特性
- 使用 `localStorage` 存储引导完成状态
- 动态创建覆盖层和提示框
- 自动定位提示框，避免超出视口
- 支持自定义步骤和位置

### HelpPanel 组件

#### 主要功能
- 使用 Ant Design 的 Drawer 组件显示帮助
- 使用 Collapse 组件展示常见问题
- 响应式设计，适配各种屏幕尺寸

#### 集成方式
```javascript
<HelpPanel moduleKey="dashboard" />
```

---

## 最佳实践

### 1. 引导设计
- ✅ 保持引导步骤简洁，每步不超过 3 句话
- ✅ 使用清晰的目标元素高亮
- ✅ 提供"跳过"选项，尊重用户选择
- ✅ 在关键步骤提供详细说明

### 2. 帮助内容
- ✅ 使用简洁的语言，避免技术术语
- ✅ 提供实际的操作步骤
- ✅ 包含常见错误和解决方案
- ✅ 定期更新帮助内容

### 3. 用户体验
- ✅ 首次登录自动显示引导
- ✅ 允许用户随时访问帮助
- ✅ 提供重新开始引导的选项
- ✅ 记住用户的选择

---

## 扩展建议

### 第二阶段：智能提示系统
- 根据用户操作显示相关提示
- 追踪用户的操作历史
- 识别用户的行为模式
- 在适当的时机显示提示

### 第三阶段：交互式教程
- 创建完整的学习路径
- 提供视频教程
- 支持练习和测试
- 生成学习报告

### 第四阶段：多语言支持
- 支持中文、英文等多种语言
- 根据用户偏好自动切换
- 提供本地化的帮助内容

---

## 故障排除

### 引导不显示
- 检查 `localStorage` 中是否有 `mes_onboarding_completed` 标记
- 清除标记：`localStorage.removeItem('mes_onboarding_completed')`
- 检查浏览器控制台是否有错误

### 帮助面板不显示
- 确保 `HelpPanel` 组件已正确导入
- 检查 `moduleKey` 是否在 `helpContent` 中定义
- 检查 Ant Design 组件是否正确安装

### 提示框位置不正确
- 检查目标元素的 CSS 选择器是否正确
- 确保目标元素在 DOM 中存在
- 调整 `position` 参数（center, right, left, bottom）

---

## 总结

这个新手引导系统为初次接触 MES 系统的用户提供了友好的学习体验。通过结合引导向导、帮助面板和智能提示，我们可以显著降低用户的学习曲线，提高系统的易用性。

未来可以继续扩展这个系统，添加更多的功能和内容，为用户提供更好的支持。
